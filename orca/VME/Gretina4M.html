<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20170816" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>LBL Gretina4 (MJD)</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="Gretina4M_files/Gretina4M.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Gretina4M_files/Gretina4MIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Media/IE8.css'/><![endif]-->
    <script type="text/javascript" src="Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="Scripts/iWebImage.js"></script>
    <script type="text/javascript" src="Gretina4M_files/Gretina4M.js"></script>
  </head>
  <body style="background: rgb(255, 255, 255); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 0px; margin-left: auto; margin-right: auto; margin-top: 0px; overflow: hidden; position: relative; word-wrap: break-word;  background: transparent; text-align: left; width: 700px; " id="body_content">
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 35px; margin-top: 0px; opacity: 1.00; position: relative; width: 630px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', 'Scripts/Widgets/Navbar', 'Scripts/Widgets/SharedResources', '.', {"path-to-root": "", "navbar-css": ".navbar {\n\tfont-family: Arial, sans-serif;\n\tfont-size: 1em;\n\tcolor: #666;\n\tmargin: 9px 0px 6px 0px;\n\tline-height: 30px;\n}\n\n.navbar-bg {\n\ttext-align: center;\n}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 10px 0px 10px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tcolor: #666;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tcolor: #666;\n}\n\nli a:hover\r{\r\n \tcolor: #463C3C;\n\ttext-decoration: none;\r}\n\n\nli.current-page a\r{\r\t color: #463C3C;\n\ttext-decoration: none;\n\tfont-weight: bold;\r\r}", "current-page-GUID": "DA9BAD44-EF9C-428E-8BA8-347AFD9C3409", "isCollectionPage": "NO"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 82px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id1" style="height: 50px; left: 35px; position: absolute; top: 32px; width: 630px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content style_External_630_50" style="padding: 0px; ">
              <div class="style">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Header">LBL Gretina4 (MJD)</p>
              </div>
            </div>
          </div>
          


          <div style="height: 1px; width: 630px;  height: 1px; left: 49px; position: absolute; top: -349px; width: 630px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 630px; ">
              <img src="Gretina4M_files/shapeimage_1.jpg" alt="" style="height: 1px; left: 0px; position: absolute; top: 0px; width: 630px; " />
            </div>
          </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 378px; width: 707px;  height: 378px; left: -4px; position: absolute; top: 1340px; width: 707px; z-index: 1; " class="tinyText style_SkipStroke_1 stroke_0">
            <img src="Gretina4M_files/Screen%20Shot%202013-05-06%20at%208.24.17%20AM.png" alt="" style="border: none; height: 379px; width: 707px; " />
          </div>
          


          <div style="height: 282px; width: 535px;  height: 282px; left: -7px; position: absolute; top: 1844px; width: 535px; z-index: 1; " class="tinyText style_SkipStroke_1 stroke_0">
            <img src="Gretina4M_files/Screen%20Shot%202013-05-03%20at%204.10.42%20PM.png" alt="" style="border: none; height: 282px; width: 535px; " />
          </div>
          


          <div style="height: 23px; width: 35px;  height: 21px; left: 395px; position: absolute; top: 1360px; width: 35px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 35px; ">
              <img src="Gretina4M_files/shapeimage_2.png" alt="" style="height: 23px; left: 0px; margin-top: -1px; position: absolute; top: 0px; width: 35px; " />
            </div>
          </div>
          


          <div style="height: 47px; width: 16px;  height: 46px; left: 374px; position: absolute; top: 1650px; width: 14px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 14px; ">
              <img src="Gretina4M_files/shapeimage_3.png" alt="" style="height: 47px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 16px; " />
            </div>
          </div>
          


          <div id="id2" style="height: 43px; left: 320px; position: absolute; top: 1686px; width: 87px; z-index: 1; " class="style_SkipStroke_2 shape-with-text stroke_1">
            <div class="text-content graphic_textbox_layout_style_default_External_85_41" style="padding: 1px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Flush all data from the FIFO</p>
              </div>
            </div>
          </div>
          


          <div id="id3" style="height: 1292px; left: 8px; position: absolute; top: 14px; width: 683px; z-index: 1; " class="style_SkipStroke_4 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_683_1292" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <div class="paragraph Body" style="padding-top: 0pt; "><div style="height: 128px; width: 16px;  clear: left; float: left; height: 128px; margin: 6px 6px 6px 0px; position: relative; width: 16px; " class="tinyText style_SkipStroke_3 inline-block stroke_0 shadow_0"><img src="Gretina4M_files/GretinaCard.gif" alt="" style="border: none; height: 128px; width: 16px; " /></div><span class="style_1"></span><span class="style_1"></span>This first section is same as the original Gretina board. This is a 8-channel, 12-bit signal processing board which continuously samples at a rate of 100 MHz. The board was also designed to meet the more general requirements for a signal processor board as specified by the Argonne workshop on digital electronics (2001) for low-energy nuclear physics experiments. This board is differs from most commercial digitizers in that it emulates, in a single large FPGA, much of the functionality found in analog systems for Ge detectors. Segment energies are calculated on the board from the trace obtained from the detectors preamplifier using a digitally implemented trapezoidal shaper. This means that only the part of the trace which contains information relevant to signal decomposition needs to be extracted, rather than the significantly longer trace required to recover proper energy resolution. This dramatically reduces the data which is transferred on the VME backplane and allows the board to operate at rates of several kHz. Constant fraction times, pile-up detection and windowing algorithms are also implemented on the board.<br /></div>
                <p class="Body"><br /></p>
                <p class="Body">Each channel of the board can be independently triggered and three triggering modes are provided; internal, external and validate modes. In internal mode a channel of the signal processing board is triggered by an internal, digitally implemented, leading edge discriminator. Each discriminator is accessible as an ECL logic pulse at the front panel. In external mode, the channel is triggered by an externally provided ECL logic pulse input on the boards front panel. In validate mode, the board is triggered if the leading edge discriminator fires followed by an externally provided ECL logic signal which validates the event.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Associated with each event produced by a valid trigger is a 48 bit time stamp, incremented at the digitization rate,which allows for event building between digitizer boards. Each board can be configured to operate from an external clock to synchronize these time stamps.<br /></p>
                <p class="Body">Each board contains a 1 MB output FIFO to store events before they are read out. These events contain an event header (which includes the energy, leading edge and constant fraction time, segment and board ID) and a section of the trace from the triggered channel. Mechanisms to support both polled and interrupt driven acquisition systems are provided. Board configuration is also done over the VME backplane where the integration time for the energy, the position of the trace windows, discriminator levels and constant fraction discriminator parameters can be set. <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">See the <a title="Gretina4M_files/Gretina4Manual.pdf" href="Gretina4M_files/Gretina4Manual.pdf">Gretina4Manual.pdf</a> for more specific information about the original card and <a title="Gretina4M_files/Gretina1_07.pdf" href="Gretina4M_files/Gretina1_07.pdf">Gretina1_07.pdf</a> for details of the new version. As of April 2014, version 3.0 of the firmware is the version to use. There are still some problems with corrupted headers.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body"><span class="style_1">Firmware</span><br /></p>
                <p class="Body"><br /></p>
                <p class="Body">The correct version of firmware to be running with this card is v1.07 for the main FPGA and v32-41 (April 17,2013) for the VME FPGA. Previous version of the VME firmware have an issue that prevents the GRETINA card from existing simultaneously in a crate with A16/A24 cards. The newer version of the firmware fixes that problem. <br /></p>
                <p class="Body"><br /></p>
                <p class="Body">The newest version of the VME firmware is available here: <a title="Gretina4M_files/gr-vme-v32-41Works.mcs" href="Gretina4M_files/gr-vme-v32-41Works.mcs">gr-vme-v32-41.mcs</a>.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">v3.0 of the main firmware is available here: <a title="Gretina4M_files/chipmj_top_3.00_10000037.bin" href="Gretina4M_files/chipmj_top_3.00_10000037.bin">chipmj_top_3.00_10000037.bin</a>.<br /></p>
                <p class="Body"><br /></p>
                <p class="Body">Download the lab tools from here:<br /></p>
                <p class="Body"><br /></p>
                <p class="Body"> <a title="http://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/vivado-design-tools/v2012_4---14_4.html" href="http://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/vivado-design-tools/v2012_4---14_4.html">http://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/vivado-design-tools/v2012_4---14_4.html</a><br /></p>
                <p class="Body"><br /></p>
                <ol>
                  <li style="line-height: 20px; padding-left: 0px; text-indent: 0px; " class="full-width">
                    <p style="text-indent: 0px; " class="paragraph_style_1"><span style="font-size: 15px; " class="Bullet">•</span> Connect the Platform Cable to the JTAG header on the Gretina card and to a computer with the Lab Tools installed .  Put the card in a VME crate and power it on. <br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 0px; text-indent: 0px; " class="full-width">
                    <p style="text-indent: 0px; " class="paragraph_style_1"><span style="font-size: 15px; " class="Bullet">•</span> Start the Xilinx iMpact software, open a boundary scan, and initialize the data chain. iMpact should detect the Platform cable and two chips. <br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 0px; text-indent: 0px; " class="full-width">
                    <p style="text-indent: 0px; " class="paragraph_style_1"><span style="font-size: 15px; " class="Bullet">•</span> Right-click on the image of the chip labeled xcf02s.  This is the VME FPGA.  Click the 'assign new configuration file' option and select VME firmware file.  Right-click on the image of the chip and click 'program'.<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 0px; text-indent: 0px; " class="full-width">
                    <p style="text-indent: 0px; " class="paragraph_style_1"><span style="font-size: 15px; " class="Bullet">•</span> When the programming is complete, power-cycle the crate.  You are now running the new VME firmware.<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 0px; text-indent: 0px; " class="full-width">
                    <p style="text-indent: 0px; " class="paragraph_style_1"><span style="font-size: 15px; " class="Bullet">•</span> In the ORCA GRETINA dialog, select the ‘Firmware’ tab and download the main FPGA .bin  file that is available above. It takes awhile. Be patient.<br /></p>
                  </li>
                  <li style="line-height: 20px; padding-left: 0px; text-indent: 0px; " class="full-width">
                    <p style="padding-bottom: 0pt; text-indent: 0px; " class="paragraph_style_1"><span style="font-size: 15px; " class="Bullet">•</span> NOTE: if there are problems loading the firmware, see the bottom of this page for more info.</p>
                  </li>
                </ol>
              </div>
              <div style="clear: both; height: 0px; line-height: 0px; " class="tinyText"> </div>
            </div>
          </div>
          


          <div style="height: 156px; width: 89px;  height: 155px; left: 44px; position: absolute; top: 1460px; width: 88px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 88px; ">
              <img src="Gretina4M_files/shapeimage_4.png" alt="" style="height: 156px; left: 0px; position: absolute; top: 0px; width: 89px; " />
            </div>
          </div>
          


          <div style="height: 155px; width: 95px;  height: 154px; left: 263px; position: absolute; top: 1454px; width: 94px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 94px; ">
              <img src="Gretina4M_files/shapeimage_5.png" alt="" style="height: 155px; left: 0px; position: absolute; top: 0px; width: 95px; " />
            </div>
          </div>
          


          <div style="height: 64px; width: 339px;  height: 63px; left: 59px; position: absolute; top: 1373px; width: 338px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 338px; ">
              <img src="Gretina4M_files/shapeimage_6.png" alt="" style="height: 64px; left: 0px; position: absolute; top: 0px; width: 339px; " />
            </div>
          </div>
          


          <div style="height: 32px; width: 6px;  height: 32px; left: 543px; position: absolute; top: 1652px; width: 4px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 4px; ">
              <img src="Gretina4M_files/shapeimage_7.png" alt="" style="height: 32px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 6px; " />
            </div>
          </div>
          


          <div style="height: 96px; width: 58px;  height: 96px; left: 155px; position: absolute; top: 1653px; width: 56px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 56px; ">
              <img src="Gretina4M_files/shapeimage_8.png" alt="" style="height: 96px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 58px; " />
            </div>
          </div>
          


          <div id="id4" style="height: 76px; left: 137px; position: absolute; top: 1720px; width: 124px; z-index: 1; " class="style_SkipStroke_2 shape-with-text stroke_2">
            <div class="text-content graphic_textbox_layout_style_default_External_122_74" style="padding: 1px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Run an algorithm to set the thresholds of enabled channels to the noise floor</p>
              </div>
            </div>
          </div>
          


          <div id="id5" style="height: 60px; left: 427px; position: absolute; top: 1316px; width: 91px; z-index: 1; " class="style_SkipStroke_2 shape-with-text stroke_3">
            <div class="text-content graphic_textbox_layout_style_default_External_89_58" style="padding: 1px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Parameters common to all channels</p>
              </div>
            </div>
          </div>
          


          <div style="height: 20px; width: 97px;  height: 19px; left: 85px; position: absolute; top: 1634px; width: 95px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 95px; ">
              <img src="Gretina4M_files/shapeimage_9.png" alt="" style="height: 20px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 97px; " />
            </div>
          </div>
          


          <div style="height: 20px; width: 58px;  height: 19px; left: 371px; position: absolute; top: 1631px; width: 56px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 56px; ">
              <img src="Gretina4M_files/shapeimage_10.png" alt="" style="height: 20px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 58px; " />
            </div>
          </div>
          


          <div style="height: 138px; width: 11px;  height: 137px; left: 283px; position: absolute; top: 1609px; width: 9px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 9px; ">
              <img src="Gretina4M_files/shapeimage_11.png" alt="" style="height: 138px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 11px; " />
            </div>
          </div>
          


          <div id="id6" style="height: 60px; left: 268px; position: absolute; top: 1736px; width: 86px; z-index: 1; " class="style_SkipStroke_2 shape-with-text stroke_4">
            <div class="text-content graphic_textbox_layout_style_default_External_84_58" style="padding: 1px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Threshold and triggering parameters</p>
              </div>
            </div>
          </div>
          


          <div style="height: 20px; width: 62px;  height: 19px; left: 539px; position: absolute; top: 1631px; width: 60px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 60px; ">
              <img src="Gretina4M_files/shapeimage_12.png" alt="" style="height: 20px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 62px; " />
            </div>
          </div>
          


          <div id="id7" style="height: 43px; left: 498px; position: absolute; top: 1669px; width: 103px; z-index: 1; " class="style_SkipStroke_2 shape-with-text stroke_5">
            <div class="text-content graphic_textbox_layout_style_default_External_101_41" style="padding: 1px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Write all values to the hardware</p>
              </div>
            </div>
          </div>
          


          <div id="id8" style="height: 196px; left: 485px; position: absolute; top: 1751px; width: 199px; z-index: 1; " class="style_SkipStroke_5 shape-with-text stroke_6 shadow_1">
            <div class="text-content graphic_textbox_layout_style_default_External_197_194" style="padding: 1px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_2"><span style="line-height: 19px; " class="style_2">Helpful Hint.</span><br /></p>
                <p class="paragraph_style_3">Use Cmd-Shift-&gt; and Cmd-Shift-&lt; to make this dialog control a card in a slot to the right or left of the currently selected card.<br /></p>
                <p class="paragraph_style_3"><br /></p>
                <p style="padding-bottom: 0pt; " class="paragraph_style_3">Use Cmd-C to bring up another card dialog, set one of them to the Rates display and one to the Settings display to see rates while setting thresholds.</p>
              </div>
            </div>
          </div>
          


          <div style="height: 141px; width: 34px;  height: 141px; left: 64px; position: absolute; top: 1616px; width: 32px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 32px; ">
              <img src="Gretina4M_files/shapeimage_13.png" alt="" style="height: 141px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 34px; " />
            </div>
          </div>
          


          <div id="id9" style="height: 76px; left: 7px; position: absolute; top: 1720px; width: 119px; z-index: 1; " class="style_SkipStroke_2 shape-with-text stroke_7">
            <div class="text-content graphic_textbox_layout_style_default_External_117_74" style="padding: 1px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Various set-up flags. Only enabled channels will be read out.</p>
              </div>
            </div>
          </div>
          


          <div style="height: 111px; width: 229px;  height: 110px; left: 53px; position: absolute; top: 1913px; width: 228px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 228px; ">
              <img src="Gretina4M_files/shapeimage_14.png" alt="" style="height: 111px; left: 0px; position: absolute; top: 0px; width: 229px; " />
            </div>
          </div>
          


          <div style="height: 83px; width: 185px;  height: 82px; left: 292px; position: absolute; top: 1911px; width: 184px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 184px; ">
              <img src="Gretina4M_files/shapeimage_15.png" alt="" style="height: 83px; left: 0px; position: absolute; top: 0px; width: 185px; " />
            </div>
          </div>
          


          <div style="height: 19px; width: 163px;  height: 18px; left: 297px; position: absolute; top: 2027px; width: 161px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 161px; ">
              <img src="Gretina4M_files/shapeimage_16.png" alt="" style="height: 19px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 163px; " />
            </div>
          </div>
          


          <div style="height: 72px; width: 4px;  height: 71px; left: 147px; position: absolute; top: 2024px; width: 2px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 2px; ">
              <img src="Gretina4M_files/shapeimage_17.png" alt="" style="height: 72px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 4px; " />
            </div>
          </div>
          


          <div style="height: 47px; width: 29px;  height: 47px; left: 370px; position: absolute; top: 2044px; width: 27px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 27px; ">
              <img src="Gretina4M_files/shapeimage_18.png" alt="" style="height: 47px; left: 0px; margin-left: -1px; position: absolute; top: 0px; width: 29px; " />
            </div>
          </div>
          


          <div style="height: 33px; width: 73px;  height: 31px; left: 476px; position: absolute; top: 1968px; width: 73px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 73px; ">
              <img src="Gretina4M_files/shapeimage_19.png" alt="" style="height: 33px; left: 0px; margin-top: -1px; position: absolute; top: 0px; width: 73px; " />
            </div>
          </div>
          


          <div id="id10" style="height: 26px; left: 499px; position: absolute; top: 1975px; width: 101px; z-index: 1; " class="style_SkipStroke_2 shape-with-text stroke_8">
            <div class="text-content graphic_textbox_layout_style_default_External_99_24" style="padding: 1px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Rate over time. </p>
              </div>
            </div>
          </div>
          


          <div id="id11" style="height: 43px; left: 365px; position: absolute; top: 2066px; width: 113px; z-index: 1; " class="style_SkipStroke_2 shape-with-text stroke_9">
            <div class="text-content graphic_textbox_layout_style_default_External_111_41" style="padding: 1px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Current FIFO state information</p>
              </div>
            </div>
          </div>
          


          <div id="id12" style="height: 60px; left: 74px; position: absolute; top: 2066px; width: 168px; z-index: 1; " class="style_SkipStroke_2 shape-with-text stroke_10">
            <div class="text-content graphic_textbox_layout_style_default_External_166_58" style="padding: 1px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Channel-by-channel rates. Note that you can enable/disable channels here also</p>
              </div>
            </div>
          </div>
          


          <div id="id13" style="height: 2043px; left: 8px; position: absolute; top: 2153px; width: 683px; z-index: 1; " class="style_SkipStroke_4 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_683_2043" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="Body"><span class="style_1">Waveform record:</span><br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx<br /></p>
                <p class="paragraph_style_4">^^^^ ^^^^ ^^^^ ^^----------------------- Data ID (from header)<br /></p>
                <p class="paragraph_style_4">-----------------^^ ^^^^ ^^^^ ^^^^ ^^^^- length<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx<br /></p>
                <p class="paragraph_style_4">--------^-^^^--------------------------- Crate number<br /></p>
                <p class="paragraph_style_4">-------------^-^^^^--------------------- Card number<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx<br /></p>
                <p class="paragraph_style_4">^^^^ ^^^^ ^^^^ ^^^^ ^^^^ ^^^^ ^^^^ ^^^^ always 0xAAAAAAAA<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx<br /></p>
                <p class="paragraph_style_4">------------------------------------^^^- Channel number<br /></p>
                <p class="paragraph_style_4">--------------------^^^^ ^^^^ ^^^^------ Board ID<br /></p>
                <p class="paragraph_style_4">^^^^ ^^^^ ^^^^ ^^^^--------------------- Always 0x0000<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx<br /></p>
                <p class="paragraph_style_4">^^^^ ^^^^ ^^^^ ^^^^ ^^^^ ^^^^ ^^^^ ^^^^- LED timestamp<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx<br /></p>
                <p class="paragraph_style_4">--------------------^^^^ ^^^^ ^^^^ ^^^^- LED timestamp<br /></p>
                <p class="paragraph_style_4">^^^^ ^^^^ ^^^^ ^^^^--------------------- Energy <br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx<br /></p>
                <p class="paragraph_style_4">--------------------^^^^ ^^^^ ^^^^ ^^^^- Energy<br /></p>
                <p class="paragraph_style_4">^^^^ ^^^^ ^^^^ ^^^^--------------------- CFD Timestamp<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx<br /></p>
                <p class="paragraph_style_4">--------------------^^^^ ^^^^ ^^^^ ^^^^- CFD Timestamp<br /></p>
                <p class="paragraph_style_4">^^^^ ^^^^ ^^^^ ^^^^--------------------- CFD Timestamp<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx<br /></p>
                <p class="paragraph_style_4">--------------------^^^^ ^^^^ ^^^^ ^^^^- CFD1 L<br /></p>
                <p class="paragraph_style_4">^^^^ ^^^^ ^^^^ ^^^^--------------------- CFD1 H<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx<br /></p>
                <p class="paragraph_style_4">--------------------^^^^ ^^^^ ^^^^ ^^^^- CFD2 L<br /></p>
                <p class="paragraph_style_4">^^^^ ^^^^ ^^^^ ^^^^--------------------- CFD2 H<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx - Word 16, 17 Reserved<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx - Word 18, 19 Reserved<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx - Word 20, 21 Reserved<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx - Word 22, 23 Reserved<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx - Word 24, 25 Reserved<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx - Word 26, 27 Reserved<br /></p>
                <p class="paragraph_style_4">xxxx xxxx xxxx xxxx xxxx xxxx xxxx xxxx - Word 28<br /></p>
                <p class="paragraph_style_4">--------------------^^^^ ^^^^ ^^^^ ^^^^- Reserved<br /></p>
                <p class="paragraph_style_4">^^^^ ^^^^ ^^^^ ^^^^--------------------- First Data Word<br /></p>
                <p class="paragraph_style_4">....1009 Long Words of Raw data points follow.....<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="Body"><span class="style_1">Recovering from Firmware Problems<br /></span></p>
                <p class="Body"><span class="style_1"><br /></span></p>
                <p class="paragraph_style_5"><span style="line-height: 19px; " class="style_3">  If the GRETINA cards are not working properly and all of the lights on the front of the card are yellow, you will have to try to reinstall the firmware or </span><span style="line-height: 19px; " class="style_4">change the fuses on the board</span><span style="line-height: 19px; " class="style_3">. Due to some compatibility problems with the newest firmware, a fresh install of the newest firmware (v1.07) for the GRETINA cards may not allow you to communicate with the GRETINA card via ORCA. As such, here we provide a guide for getting the new firmware working:</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_6"><span style="line-height: 19px; " class="style_3">1)</span><span style="line-height: 10px; " class="style_6">      </span><span style="line-height: 19px; " class="style_3">Using the Xilinx Lab Tools ISE iMPACT software and the XILINX Platform Cable USB II, connect the computer to the side of the GRETINA card (JTAG port).</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_6"><span style="line-height: 19px; " class="style_3">2)</span><span style="line-height: 10px; " class="style_6">      </span><span style="line-height: 19px; " class="style_3">In the iMPACT software, choose Boundary Scan and then click </span><span style="line-height: 19px; " class="style_7">Initialize Chain </span><span style="line-height: 19px; " class="style_3">to find the devices you’re connected to.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_6"><span style="line-height: 19px; " class="style_3">3)</span><span style="line-height: 10px; " class="style_6">      </span><span style="line-height: 19px; " class="style_3">The first device (on the left) should read something like xcf02s, right click it and choose </span><span style="line-height: 19px; " class="style_7">Assign New Configuration File</span><span style="line-height: 19px; " class="style_3">.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_6"><span style="line-height: 19px; " class="style_3">4)</span><span style="line-height: 10px; " class="style_6">      </span><span style="line-height: 19px; " class="style_3">Here choose the </span><a title="Gretina4M_files/vme-28-41.mcs" href="Gretina4M_files/vme-28-41.mcs" style="line-height: 19px; " class="style_4">vme-28-41.mcs</a><span style="line-height: 19px; " class="style_3"> file for the configuration file and then right click the device and choose </span><span style="line-height: 19px; " class="style_7">Program</span><span style="line-height: 19px; " class="style_3">. This should install an older version of the VME firmware on the GRETINA card.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_6"><span style="line-height: 19px; " class="style_3">5)</span><span style="line-height: 10px; " class="style_6">      </span><span style="line-height: 19px; " class="style_3">Here you need to turn off the VME crate to restart the card for the installation to set. Do this now; don’t forget to shutdown the SBC first.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_6"><span style="line-height: 19px; " class="style_3">6)</span><span style="line-height: 10px; " class="style_6">      </span><span style="line-height: 19px; " class="style_3">Now the second device (on the right) should read something like xc3s5000, right click it and choose </span><span style="line-height: 19px; " class="style_7">Assign New Configuration File</span><span style="line-height: 19px; " class="style_3">.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_6"><span style="line-height: 19px; " class="style_3">7)</span><span style="line-height: 10px; " class="style_6">      </span><span style="line-height: 19px; " class="style_3">This time choose the </span><a title="Gretina4M_files/chip_top_001_05b.bit" href="Gretina4M_files/chip_top_001_05b.bit" style="line-height: 19px; " class="style_4">chip_top_001_05b.bit</a><span style="line-height: 19px; " class="style_3"> file as your configuration file. Then right click on the device and choose </span><span style="line-height: 19px; " class="style_7">Program</span><span style="line-height: 19px; " class="style_3">. This should install an older version of the main FPGA firmware for use of the GRETINA card with ORCA. This time don’t turn off the VME crate, the firmware you’ve just installed will be deleted if you turn the crate off now.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_6"><span style="line-height: 19px; " class="style_3">8)</span><span style="line-height: 10px; " class="style_6">      </span><span style="line-height: 19px; " class="style_3">From here, you should be able to talk to the card using ORCA in the normal fashion (put it in a VME crate with an SBC and connect). It may tell you it has outdated firmware, this is OK.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_6"><span style="line-height: 19px; " class="style_3">9)</span><span style="line-height: 10px; " class="style_6">      </span><span style="line-height: 19px; " class="style_3">Now in the ORCA dialog for the GRETINA card there should be tab labeled </span><span style="line-height: 19px; " class="style_7">Firmware</span><span style="line-height: 19px; " class="style_3"> if there isn’t, update ORCA. Choose this tab and click </span><span style="line-height: 19px; " class="style_7">Load</span><span style="line-height: 19px; " class="style_3"> to install the newest version of the main FPGA firmware on the GRETINA card. For this option, you should use the newest version on the ORCA help site mentioned above, as of April 2014 this is </span><a title="Gretina4M_files/chipmj_top_3.00_10000037_1.bin" href="Gretina4M_files/chipmj_top_3.00_10000037_1.bin" class="style_8">chipmj_top_3.00_10000037.bin</a><span style="line-height: 19px; " class="style_3">, download it from the help site if you don’t have it.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_6"><span style="line-height: 19px; " class="style_3">10)</span><span style="line-height: 10px; " class="style_6">  </span><span style="line-height: 19px; " class="style_3">Now that you’ve finished installing the new main FPGA firmware, you will need to update to the newest VME firmware for the GRETINA card.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_6"><span style="line-height: 19px; " class="style_3">11)</span><span style="line-height: 10px; " class="style_6">  </span><span style="line-height: 19px; " class="style_3">To do this, go back to the XILINX lab tools and find the devices, choose the first device (xcf02s) and right click </span><span style="line-height: 19px; " class="style_7">Assign New Configuration File</span><span style="line-height: 19px; " class="style_3"> and this time choose the newest VME firmware available on the ORCA help site mentioned above, as of November, 2013 this is </span><a title="Gretina4M_files/gr-vme-v32-41Works_1.mcs" href="Gretina4M_files/gr-vme-v32-41Works_1.mcs" class="style_8">gr-vme-v32-41Works.mcs</a><span style="line-height: 19px; " class="style_3">. Now just click </span><span style="line-height: 19px; " class="style_7">Program</span><span style="line-height: 19px; " class="style_3"> and it should install the new VME firmware on the card.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_6"><span style="line-height: 19px; " class="style_3">12)</span><span style="line-height: 10px; " class="style_6">  </span><span style="line-height: 19px; " class="style_3">Here just restart the VME crate and you should be able to use the card properly with ORCA and it now has all of the new firmware installed on it.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_5"><span style="line-height: 19px; " class="style_4">Additional Notes:</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_5"><span style="font-family: 'LucidaGrande', 'Lucida Grande', 'Lucida Sans Unicode', sans-serif; font-size: 16px; font-stretch: normal; font-style: normal; font-weight: 400; line-height: 18px; " class="style_9">·</span><span style="line-height: 10px; " class="style_6">         </span><span style="line-height: 19px; " class="style_3">Turning off the VME crate will erase the main FPGA firmware you installed using XILINX but not the main FPGA firmware you installed using ORCA.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_5"><span style="font-family: 'LucidaGrande', 'Lucida Grande', 'Lucida Sans Unicode', sans-serif; font-size: 16px; font-stretch: normal; font-style: normal; font-weight: 400; line-height: 18px; " class="style_9">·</span><span style="line-height: 10px; " class="style_6">         </span><span style="line-height: 19px; " class="style_3">None of these steps should take more than 10-20 minutes; if ORCA is taking forever to load the main FPGA firmware something may be wrong.</span><span style="line-height: 14px; " class="style_5"><br /></span></p>
                <p class="paragraph_style_5"><span style="font-family: 'LucidaGrande', 'Lucida Grande', 'Lucida Sans Unicode', sans-serif; font-size: 16px; font-stretch: normal; font-style: normal; font-weight: 400; line-height: 18px; " class="style_9">·</span><span style="line-height: 10px; " class="style_6">         </span><span style="line-height: 19px; " class="style_3">The GRETINA card must be plugged into a powered VME crate for the XILINX software to read it and install firmware on it.</span><span class="style_1"><br /></span></p>
                <p class="Body"><br /></p>
                <p class="paragraph_style_4"><br /></p>
              </div>
            </div>
          </div>
          <div style="height: 4196px; line-height: 4196px; " class="spacer"> </div>
        </div>
        <div style="height: 150px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
        </div>
      </div>
    </div>
  </body>
</html>


