<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>OrcaROOT: ORVSigHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>ORVSigHandler Class Reference</h1><!-- doxytag: class="ORVSigHandler" -->Allows asynchronous signals to be handles synchronously.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_o_r_v_sig_handler_8hh_source.html">ORVSigHandler.hh</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for ORVSigHandler:</div>
<div class="dynsection">

<p><center><img src="class_o_r_v_sig_handler.png" usemap="#ORVSigHandler_map" border="0" alt=""></center>
<map name="ORVSigHandler_map">
<area href="class_o_r_data_proc_manager.html" alt="ORDataProcManager" shape="rect" coords="0,56,134,80">
<area href="class_o_r_server.html" alt="ORServer" shape="rect" coords="144,56,278,80">
<area href="class_o_r_socket_reader.html" alt="ORSocketReader" shape="rect" coords="288,56,422,80">
</map>
</div>

<p>
<a href="class_o_r_v_sig_handler-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_r_v_sig_handler.html#39fc222a88e0d215a1a685c8249a1e15">Cancel</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cancels just the particular class.  <a href="#39fc222a88e0d215a1a685c8249a1e15"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_r_v_sig_handler.html#10dc1b1e1db8fdba8b9a39c45c9fef5d">UnCancel</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset the Cancel flags.  <a href="#10dc1b1e1db8fdba8b9a39c45c9fef5d"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_r_v_sig_handler.html#cb51609e89d318754c8e5a5370f682e8">CancelAll</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call to cancel all ORVSigHandlers.  <a href="#cb51609e89d318754c8e5a5370f682e8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_r_v_sig_handler.html#78df27b09c2befe3804b6206a5dc76d6">CancelAllInThread</a> (pthread_t aThread)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Just call cancel all in a particular thread.  <a href="#78df27b09c2befe3804b6206a5dc76d6"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_r_v_sig_handler.html#2b011faa7147f7dac43aba7a2f9f3dcf">ORVSigHandler</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_r_v_sig_handler.html#b5b4150113dfdfc2d4f9fb127421f079">~ORVSigHandler</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_r_v_sig_handler.html#6ddd0116e0d371c0bc67c17e9733b0c5">TestCancel</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function indicates to the class whether or not it has been canceled.  <a href="#6ddd0116e0d371c0bc67c17e9733b0c5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_o_r_v_sig_handler.html#b0e86248462eed16571469993bc83e31">CancelAnInstance</a> ()</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Allows asynchronous signals to be handles synchronously. 
<p>
This class can be called asynchronously (e.g. from a signal handler, or another thread) and we use it to signal derived classes synchronously.<p>
The idea is simple: a class that derives from this can periodically call <a class="el" href="class_o_r_v_sig_handler.html#6ddd0116e0d371c0bc67c17e9733b0c5" title="This function indicates to the class whether or not it has been canceled.">TestCancel()</a> to determine if it needs to exit, or do something. This is particularly useful in the case of a reader, which needs to close, or a processor which is looping and might be requested to close in the middle of a loop. Nothing here guarantees that a process will stop. Instead this sets markers (like pthread_testcancel, except TestCancel does not immediately exit the thread if there is a pending cancel) and a class can test these at appropriate times.<p>
This class is safe across thread boundaries, but with some caveats. If <a class="el" href="class_o_r_v_sig_handler.html#cb51609e89d318754c8e5a5370f682e8" title="Call to cancel all ORVSigHandlers.">CancelAll()</a> is called, then <a class="el" href="class_o_r_v_sig_handler.html#6ddd0116e0d371c0bc67c17e9733b0c5" title="This function indicates to the class whether or not it has been canceled.">TestCancel()</a> will be set to true for *all* derived classes in every thread. If one wants to signal only a particular thread then call <a class="el" href="class_o_r_v_sig_handler.html#78df27b09c2befe3804b6206a5dc76d6" title="Just call cancel all in a particular thread.">CancelAllInThread()</a> which will set <a class="el" href="class_o_r_v_sig_handler.html#6ddd0116e0d371c0bc67c17e9733b0c5" title="This function indicates to the class whether or not it has been canceled.">TestCancel()</a> to true for all derived classes within the specified thread. (There is no error if the thread doesn't exist, or if no derived classes exist in that thread.) Derived classes take the pthread_t id of the thread in which they were generated, so whereas all calls to CancelAll and CancelAllInThread are thread-safe (from any thread) the programmer needs to know exactly which classes are being told to cancel.<p>
Also, this class does not provide signal handling, or any heavy-handed kill functionality. It WILL NOT kill, delete, or stop a derived class. It is the coder's responsibility to set test <a class="el" href="class_o_r_v_sig_handler.html#6ddd0116e0d371c0bc67c17e9733b0c5" title="This function indicates to the class whether or not it has been canceled.">TestCancel()</a> at appropriate locations like:<p>
<div class="fragment"><pre class="fragment">
   if (TestCancel()) {
     // I need to exit.  Do something, clean up, and get out.
   }
   // otherwise continue as normal
   </pre></div><p>
For signal handling, please see <a class="el" href="class_o_r_handler_thread.html">ORHandlerThread</a>.<p>
It is important for the coder to be aware of blocking system calls that might not exit. Some workarounds can be done to keep this from happening. 
<p>Definition at line <a class="el" href="_o_r_v_sig_handler_8hh_source.html#l00052">52</a> of file <a class="el" href="_o_r_v_sig_handler_8hh_source.html">ORVSigHandler.hh</a>.</p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="2b011faa7147f7dac43aba7a2f9f3dcf"></a><!-- doxytag: member="ORVSigHandler::ORVSigHandler" ref="2b011faa7147f7dac43aba7a2f9f3dcf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ORVSigHandler::ORVSigHandler           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="_o_r_v_sig_handler_8cc_source.html#l00011">11</a> of file <a class="el" href="_o_r_v_sig_handler_8cc_source.html">ORVSigHandler.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="b5b4150113dfdfc2d4f9fb127421f079"></a><!-- doxytag: member="ORVSigHandler::~ORVSigHandler" ref="b5b4150113dfdfc2d4f9fb127421f079" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ORVSigHandler::~ORVSigHandler           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="_o_r_v_sig_handler_8cc_source.html#l00020">20</a> of file <a class="el" href="_o_r_v_sig_handler_8cc_source.html">ORVSigHandler.cc</a>.</p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="39fc222a88e0d215a1a685c8249a1e15"></a><!-- doxytag: member="ORVSigHandler::Cancel" ref="39fc222a88e0d215a1a685c8249a1e15" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ORVSigHandler::Cancel           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Cancels just the particular class. 
<p>

<p>Definition at line <a class="el" href="_o_r_v_sig_handler_8hh_source.html#l00062">62</a> of file <a class="el" href="_o_r_v_sig_handler_8hh_source.html">ORVSigHandler.hh</a>.</p>

</div>
</div><p>
<a class="anchor" name="cb51609e89d318754c8e5a5370f682e8"></a><!-- doxytag: member="ORVSigHandler::CancelAll" ref="cb51609e89d318754c8e5a5370f682e8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ORVSigHandler::CancelAll           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Call to cancel all ORVSigHandlers. 
<p>

<p>Definition at line <a class="el" href="_o_r_v_sig_handler_8cc_source.html#l00055">55</a> of file <a class="el" href="_o_r_v_sig_handler_8cc_source.html">ORVSigHandler.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="78df27b09c2befe3804b6206a5dc76d6"></a><!-- doxytag: member="ORVSigHandler::CancelAllInThread" ref="78df27b09c2befe3804b6206a5dc76d6" args="(pthread_t aThread)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ORVSigHandler::CancelAllInThread           </td>
          <td>(</td>
          <td class="paramtype">pthread_t&nbsp;</td>
          <td class="paramname"> <em>aThread</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Just call cancel all in a particular thread. 
<p>

<p>Definition at line <a class="el" href="_o_r_v_sig_handler_8cc_source.html#l00042">42</a> of file <a class="el" href="_o_r_v_sig_handler_8cc_source.html">ORVSigHandler.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="b0e86248462eed16571469993bc83e31"></a><!-- doxytag: member="ORVSigHandler::CancelAnInstance" ref="b0e86248462eed16571469993bc83e31" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ORVSigHandler::CancelAnInstance           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="_o_r_v_sig_handler_8cc_source.html#l00067">67</a> of file <a class="el" href="_o_r_v_sig_handler_8cc_source.html">ORVSigHandler.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="6ddd0116e0d371c0bc67c17e9733b0c5"></a><!-- doxytag: member="ORVSigHandler::TestCancel" ref="6ddd0116e0d371c0bc67c17e9733b0c5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ORVSigHandler::TestCancel           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function indicates to the class whether or not it has been canceled. 
<p>
In particular one should use this in a loop that should be stopped by an interrupt. It is the coders responsibility to make sure these are placed appropriately. See, e.g., <a class="el" href="class_o_r_data_proc_manager.html">ORDataProcManager</a> for how to do this. 
<p>Definition at line <a class="el" href="_o_r_v_sig_handler_8cc_source.html#l00081">81</a> of file <a class="el" href="_o_r_v_sig_handler_8cc_source.html">ORVSigHandler.cc</a>.</p>

</div>
</div><p>
<a class="anchor" name="10dc1b1e1db8fdba8b9a39c45c9fef5d"></a><!-- doxytag: member="ORVSigHandler::UnCancel" ref="10dc1b1e1db8fdba8b9a39c45c9fef5d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ORVSigHandler::UnCancel           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reset the Cancel flags. 
<p>

<p>Definition at line <a class="el" href="_o_r_v_sig_handler_8cc_source.html#l00074">74</a> of file <a class="el" href="_o_r_v_sig_handler_8cc_source.html">ORVSigHandler.cc</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>/Users/markhowe/Dev/OrcaRoot/Util/<a class="el" href="_o_r_v_sig_handler_8hh_source.html">ORVSigHandler.hh</a><li>/Users/markhowe/Dev/OrcaRoot/Util/<a class="el" href="_o_r_v_sig_handler_8cc_source.html">ORVSigHandler.cc</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed May 13 08:51:20 2009 for OrcaROOT by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
